delete from CA_MODULE where MODU_ID in ('41030001','41030002','41030003','41030004');

insert into CA_MODULE(PROD_ID,MODU_ID,SEQNO,MODU_NAME,LEVEL_ID,MODU_TYPE,ACTION_NAME,ACTION_URL,COMM,TIME_STAMP)
values('R3_RYC','41030001',0,'收入支出报表','004002012',1,'actfrmIoroDayReport','#','00',5497000);
insert into CA_MODULE(PROD_ID,MODU_ID,SEQNO,MODU_NAME,LEVEL_ID,MODU_TYPE,ACTION_NAME,ACTION_URL,COMM,TIME_STAMP)
values('R3_RYC','41030002',1,'查询','004002012002',2,'#','#','00',5497000);
insert into CA_MODULE(PROD_ID,MODU_ID,SEQNO,MODU_NAME,LEVEL_ID,MODU_TYPE,ACTION_NAME,ACTION_URL,COMM,TIME_STAMP)
values('R3_RYC','41030003',2,'打印','004002012003',2,'#','#','00',5497000);
insert into CA_MODULE(PROD_ID,MODU_ID,SEQNO,MODU_NAME,LEVEL_ID,MODU_TYPE,ACTION_NAME,ACTION_URL,COMM,TIME_STAMP)
values('R3_RYC','41030004',3,'导出','004002012004',2,'#','#','00',5497000);

--信息分类
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('0','消息','MSG_CLASS','00',5497000);
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('1','公告','MSG_CLASS','00',5497000);
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('2','政策','MSG_CLASS','00',5497000);
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('3','广告','MSG_CLASS','00',5497000);
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('4','提醒','MSG_CLASS','00',5497000);
 
--反馈状态
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('1','未反馈','MSG_FEEDBACK_STATUS','00',5497000);
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('2','已反馈','MSG_FEEDBACK_STATUS','00',5497000);
--阅读标志
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('1','未读','MSG_READ_STATUS','00',5497000);
 insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('2','已读','MSG_READ_STATUS','00',5497000);

--信息发布表
CREATE TABLE MSC_MESSAGE(
    --企业代码
	TENANT_ID int NOT NULL,
    --信息编号
	MSG_ID char(36) NOT NULL,
    --信息类型
	MSG_CLASS varchar(10) NOT NULL,
    --发布日期
	ISSUE_DATE int NOT NULL,
    --发布门店
	SHOP_ID varchar (13) NOT NULL,
    --信息来源
	MSG_SOURCE varchar (50) NOT NULL,
    --发布用户
	ISSUE_USER varchar(36),
    --标题
	MSG_TITLE varchar(50) NOT NULL,
    --信息内容
	MSG_CONTENT varchar(500) NOT NULL,
    --有效期限
	END_DATE varchar(10),
    --通讯标志 00 新增 01修改 02 删除 第一位为0待同步,1已同步
	COMM varchar(2) NOT NULL  DEFAULT '00',
    --更新时间 从2011-01-01开始的秒数  
	TIME_STAMP bigint NOT NULL,
    CONSTRAINT PK_MSC_MESSAGE PRIMARY KEY(MSG_ID)
);

--信息反馈表
CREATE TABLE MSC_MESSAGE_LIST(
    --企业代码
	TENANT_ID int NOT NULL,
    --信息编号
	MSG_ID char(36) NOT NULL,
    --接收门店
	SHOP_ID varchar (13) NOT NULL,
    --阅读时间
	READ_DATE varchar(19),
    --阅读用户
	READ_USER varchar(36),
    --反馈状态
	MSG_FEEDBACK_STATUS int,
    --阅读标志
	MSG_READ_STATUS int,
    --通讯标志 00 新增 01修改 02 删除 第一位为0待同步,1已同步
	COMM varchar(2) NOT NULL  DEFAULT '00',
    --更新时间 从2011-01-01开始的秒数  
	TIME_STAMP bigint NOT NULL,
    CONSTRAINT PK_MSC_MSG_LIST PRIMARY KEY(TENANT_ID,MSG_ID,SHOP_ID)
);

CREATE INDEX IX_MSC_MESSAGE_TENANT_ID ON MSC_MESSAGE(TENANT_ID);
CREATE INDEX IX_MSC_MESSAGE_TIME_STAMP ON MSC_MESSAGE(TENANT_ID,TIME_STAMP);
CREATE INDEX IX_MSC_MESSAGE_ISSUE_DATE ON MSC_MESSAGE(TENANT_ID,ISSUE_DATE);
CREATE INDEX IX_MSC_MESSAGE_MSG_CLASS ON MSC_MESSAGE(TENANT_ID,MSG_CLASS);


update SYS_DEFINE set VALUE='1.0.0.2' where TENANT_ID=0 and DEFINE='DBVERSION';