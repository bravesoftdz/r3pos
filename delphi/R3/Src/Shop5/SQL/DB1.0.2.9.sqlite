--凭证模块
DROP TABLE ACC_FVCHFRAME;
CREATE TABLE [ACC_FVCHFRAME] (
  --企业代码
  [TENANT_ID] int  NOT NULL,
  --单据类型 01采购订单 02采购进货 03采购退货 04 销售订单 05 销售出货 06销售退货 07领用单 08 损益单 09收款单 10 付款单  11 零售单据 12缴款单 13 其他收入 14其他支出 15 存取款单
  [FVCH_GTYPE] [char](2)   NOT NULL,
  --序号
	[SEQNO] [int] NOT NULL ,
  --科目代码
  [SUBJECT_NO] [varchar](10)   NOT NULL,
  --摘要
  [SUMMARY] [varchar](100)   NOT NULL,
        --金额<取数字段>
	[AMONEY] [varchar](20) NULL,
        --数量<取数字段>
	[AMOUNT] [varchar](20) NULL,
        --单价<取数字段>
	[APRICE] [varchar](20) NULL,
  --取数条件=>ACC_FVCHSWHERE
  [SWHERE] [char](36) NULL,
  --分录明细 100000000 按位取数0代表不分细明1表代分明细(1人员 2部门 3门店<仓库> 4往来单位 其他分别为专项1-5)
  [DATAFLAG] [varchar](8)   NOT NULL,
  --记账方向  1借方 2贷方
  [SUBJECT_TYPE] [char](1) NOT NULL,
  CONSTRAINT [PK_ACC_FVCHFRAME] PRIMARY KEY 
  ( 
		[TENANT_ID],
		[FVCH_GTYPE],
    [SEQNO]
  )
);
CREATE INDEX IX_ACC_FVCHFRAME_TENANT_ID ON ACC_FVCHFRAME (TENANT_ID);
CREATE INDEX IX_ACC_FVCHFRAME_FVCH_GTYPE ON ACC_FVCHFRAME (TENANT_ID,FVCH_GTYPE);

--凭证模块条件
CREATE TABLE [ACC_FVCHSWHERE] (
  --企业代码
  [TENANT_ID] int  NOT NULL,
  --行号
  [SROW_ID] [char](36)   NOT NULL,
  --条件ID
  [SWHERE] [char](36)   NOT NULL,
  --条件字段
  [FIELD_NAME] [varchar](30)   NOT NULL,
  --操作符 in 或 not in
	[FIELD_EQUE] [varchar](6) NULL,
  --字段值
  [FIELD_VALUE] [varchar](50) NULL,
  CONSTRAINT [PK_ACC_FVCHSWHERE] PRIMARY KEY 
  ( 
		[TENANT_ID],
		[SROW_ID]
  )
);
CREATE INDEX IX_ACC_FVCHSWHERE_TENANT_ID ON ACC_FVCHSWHERE (TENANT_ID);
CREATE INDEX IX_ACC_FVCHSWHERE_SWHERE ON ACC_FVCHSWHERE (TENANT_ID,SWHERE);

--服务类型
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('19','活动组','INST_CLASS','00',5497000);

--设备安装及维修记录
  CREATE TABLE [SVC_INST_INFO] (
        --企业代码
        [TENANT_ID] int  NOT NULL,
        --流水ID号(内码)
	[INST_ID] [char] (36) NOT NULL ,
        --销售单号  
	[SALES_ID] [char] (36) NOT NULL ,
        --客户  
	[CLIENT_ID] [char] (36) NOT NULL ,
        --商品单号  
	[GODS_ID] [char] (36) NOT NULL ,
        --服务类型  
	[INST_CLASS] [varchar] (36) NOT NULL ,
        --产品序列号  
	[SERIAL_NO] [varchar] (50) NULL ,
        --安装地址
	[INST_ADDR] [varchar] (120) NULL ,
        --安装人
	[INST_USER] [varchar] (36) NULL ,
	--安装日期
	[INST_DATE] int NOT NULL ,
        --备注
	[REMARK] [varchar] (200) NULL,
        --操作时间
	[CREA_DATE] [varchar] (30) NULL ,
        --操作人员
	[CREA_USER] [varchar] (36) NULL ,
        --通讯标志
	[COMM] [varchar] (2) NOT NULL CONSTRAINT [DF_SVC_INST_INFO_COMM] DEFAULT ('00'),
        --时间戳 当前系统日期*86400000
        [TIME_STAMP] bigint NOT NULL,
  CONSTRAINT [PK_SVC_INST_INFO] PRIMARY KEY 
  ( 
		[TENANT_ID],
		[INST_ID]
  )
);
CREATE INDEX IX_SVC_INST_INFO_TENANT_ID ON SVC_INST_INFO(TENANT_ID);
CREATE INDEX IX_SVC_INST_INFO_SALES_ID ON SVC_INST_INFO(TENANT_ID,SALES_ID);
CREATE INDEX IX_SVC_INST_INFO_INST_DATE ON SVC_INST_INFO(TENANT_ID,INST_DATE);
