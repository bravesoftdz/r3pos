--凭证模块
DROP TABLE ACC_FVCHFRAME;
CREATE TABLE [ACC_FVCHFRAME] (
  --企业代码
  [TENANT_ID] int  NOT NULL,
  --单据类型 01采购订单 02采购进货 03采购退货 04 销售订单 05 销售出货 06销售退货 07领用单 08 损益单 09收款单 10 付款单  11 零售单据 12缴款单 13 其他收入 14其他支出 15 存取款单
  [FVCH_GTYPE] [char](2)   NOT NULL,
  --序号
	[SEQNO] [int] NOT NULL ,
  --科目代码
  [SUBJECT_NO] [varchar](10)   NOT NULL,
  --摘要
  [SUMMARY] [varchar](100)   NOT NULL,
        --金额<取数字段>
	[AMONEY] [varchar](20) NULL,
        --数量<取数字段>
	[AMOUNT] [varchar](20) NULL,
        --单价<取数字段>
	[APRICE] [varchar](20) NULL,
  --取数条件=>ACC_FVCHSWHERE
  [SWHERE] [char](36) NULL,
  --分录明细 100000000 按位取数0代表不分细明1表代分明细(1人员 2部门 3门店<仓库> 4往来单位 其他分别为专项1-5)
  [DATAFLAG] [varchar](8)   NOT NULL,
  --记账方向  1借方 2贷方
  [SUBJECT_TYPE] [char](1) NOT NULL,
  CONSTRAINT [PK_ACC_FVCHFRAME] PRIMARY KEY 
  ( 
		[TENANT_ID],
		[FVCH_GTYPE],
    [SEQNO]
  )
);
CREATE INDEX IX_ACC_FVCHFRAME_TENANT_ID ON ACC_FVCHFRAME (TENANT_ID);
CREATE INDEX IX_ACC_FVCHFRAME_FVCH_GTYPE ON ACC_FVCHFRAME (TENANT_ID,FVCH_GTYPE);

--凭证模块条件
CREATE TABLE [ACC_FVCHSWHERE] (
  --企业代码
  [TENANT_ID] int  NOT NULL,
  --行号
  [SROW_ID] [char](36)   NOT NULL,
  --条件ID
  [SWHERE] [char](36)   NOT NULL,
  --条件字段
  [FIELD_NAME] [varchar](30)   NOT NULL,
  --操作符 in 或 not in
	[FIELD_EQUE] [varchar](6) NULL,
  --字段值
  [FIELD_VALUE] [varchar](50) NULL,
  CONSTRAINT [PK_ACC_FVCHSWHERE] PRIMARY KEY 
  ( 
		[TENANT_ID],
		[SROW_ID]
  )
);
CREATE INDEX IX_ACC_FVCHSWHERE_TENANT_ID ON ACC_FVCHSWHERE (TENANT_ID);
CREATE INDEX IX_ACC_FVCHSWHERE_SWHERE ON ACC_FVCHSWHERE (TENANT_ID,SWHERE);

--服务类型
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('19','活动组','INST_CLASS','00',5497000);

--设备安装及维修记录
  CREATE TABLE [SVC_INST_INFO] (
        --企业代码
        [TENANT_ID] int  NOT NULL,
        --流水ID号(内码)
	[INST_ID] [char] (36) NOT NULL ,
        --销售单号  
	[SALES_ID] [char] (36) NOT NULL ,
        --客户  
	[CLIENT_ID] [char] (36) NOT NULL ,
        --商品单号  
	[GODS_ID] [char] (36) NOT NULL ,
        --服务类型  
	[INST_CLASS] [varchar] (36) NOT NULL ,
        --产品序列号  
	[SERIAL_NO] [varchar] (50) NULL ,
        --安装地址
	[INST_ADDR] [varchar] (120) NULL ,
        --安装人
	[INST_USER] [varchar] (36) NULL ,
	--安装日期
	[INST_DATE] int NOT NULL ,
        --备注
	[REMARK] [varchar] (200) NULL,
        --操作时间
	[CREA_DATE] [varchar] (30) NULL ,
        --操作人员
	[CREA_USER] [varchar] (36) NULL ,
        --通讯标志
	[COMM] [varchar] (2) NOT NULL CONSTRAINT [DF_SVC_INST_INFO_COMM] DEFAULT ('00'),
        --时间戳 当前系统日期*86400000
        [TIME_STAMP] bigint NOT NULL,
  CONSTRAINT [PK_SVC_INST_INFO] PRIMARY KEY 
  ( 
		[TENANT_ID],
		[INST_ID]
  )
);
CREATE INDEX IX_SVC_INST_INFO_TENANT_ID ON SVC_INST_INFO(TENANT_ID);
CREATE INDEX IX_SVC_INST_INFO_SALES_ID ON SVC_INST_INFO(TENANT_ID,SALES_ID);
CREATE INDEX IX_SVC_INST_INFO_INST_DATE ON SVC_INST_INFO(TENANT_ID,INST_DATE);

--单据类型
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('01','采购订单','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('02','采购进货','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('03','采购退货','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('04','销售订单','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('05','销售出货','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('06','销售退货','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('07','领用单','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('08','损益单','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('09','收款单','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('10','付款单','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('11','零售单据','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('12','缴款单','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('13','其他收入','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('14','其他支出','BILL_NAME','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('15','存取款单','BILL_NAME','00',5497000);

--取数字段定义 采购订单(FVCH_DATA_(单据代码01))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('APRICE','单价','FVCH_DATA_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_MONEY','含税金额','FVCH_DATA_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('NOTAX_MONEY','不含税金额','FVCH_DATA_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TAX_MONEY','进项税额','FVCH_DATA_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('ADVA_MNY','预付款','FVCH_DATA_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('BOND_MNY','保证金','FVCH_DATA_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('OTHR_MNY','其他费用','FVCH_DATA_01','00',5497000);
--取数条件定义 采购订单(FVCH_WHERE_(单据代码01))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','供应商','FVCH_WHERE_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('GUIDE_USER','采购员','FVCH_WHERE_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('INVOICE_FLAG','票据类型','FVCH_WHERE_01','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_01','00',5497000);

--取数字段定义 采购进货(FVCH_DATA_(单据代码02))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('APRICE','单价','FVCH_DATA_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_MONEY','含税金额','FVCH_DATA_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('NOTAX_MONEY','不含税金额','FVCH_DATA_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TAX_MONEY','进项税额','FVCH_DATA_02','00',5497000);
--取数条件定义 采购进货(FVCH_WHERE_(单据代码02))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','供应商','FVCH_WHERE_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('GUIDE_USER','收货员','FVCH_WHERE_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('INVOICE_FLAG','票据类型','FVCH_WHERE_02','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_02','00',5497000);

--取数字段定义 采购退货(FVCH_DATA_(单据代码03))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('APRICE','单价','FVCH_DATA_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_MONEY','含税金额','FVCH_DATA_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('NOTAX_MONEY','不含税金额','FVCH_DATA_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TAX_MONEY','进项税额','FVCH_DATA_03','00',5497000);
--取数条件定义 采购退货(FVCH_WHERE_(单据代码03))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','供应商','FVCH_WHERE_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('GUIDE_USER','收货员','FVCH_WHERE_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('INVOICE_FLAG','票据类型','FVCH_WHERE_03','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_03','00',5497000);

--取数字段定义 销售订单(FVCH_DATA_(单据代码04))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('APRICE','单价','FVCH_DATA_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_MONEY','含税金额','FVCH_DATA_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('NOTAX_MONEY','不含税金额','FVCH_DATA_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TAX_MONEY','销项税额','FVCH_DATA_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('ADVA_MNY','预收款','FVCH_DATA_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('BOND_MNY','保证金','FVCH_DATA_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('OTHR_MNY','其他费用','FVCH_DATA_04','00',5497000);
--取数条件定义 销售订单(FVCH_WHERE_(单据代码04))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','客户名称','FVCH_WHERE_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('GUIDE_USER','导购员','FVCH_WHERE_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('INVOICE_FLAG','票据类型','FVCH_WHERE_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_04','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SALES_STYLE','销售方式','FVCH_WHERE_04','00',5497000);

--取数字段定义 销售出货(FVCH_DATA_(单据代码05))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('APRICE','单价','FVCH_DATA_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_MONEY','含税金额','FVCH_DATA_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('NOTAX_MONEY','不含税金额','FVCH_DATA_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TAX_MONEY','销项税额','FVCH_DATA_05','00',5497000);
--取数条件定义 销售出货(FVCH_WHERE_(单据代码05))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','客户名称','FVCH_WHERE_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('GUIDE_USER','导购员','FVCH_WHERE_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('INVOICE_FLAG','票据类型','FVCH_WHERE_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_05','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SALES_STYLE','销售方式','FVCH_WHERE_05','00',5497000);

--取数字段定义 销售退货(FVCH_DATA_(单据代码06))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('APRICE','单价','FVCH_DATA_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_MONEY','含税金额','FVCH_DATA_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('NOTAX_MONEY','不含税金额','FVCH_DATA_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TAX_MONEY','销项税额','FVCH_DATA_06','00',5497000);
--取数条件定义 销售退货(FVCH_WHERE_(单据代码06))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','客户名称','FVCH_WHERE_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('GUIDE_USER','导购员','FVCH_WHERE_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('INVOICE_FLAG','票据类型','FVCH_WHERE_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_06','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SALES_STYLE','销售方式','FVCH_WHERE_06','00',5497000);

--取数字段定义 领用单 (FVCH_DATA_(单据代码07))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_07','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('COST_APRICE','成本价','FVCH_DATA_07','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('COST_MONEY','成本金额','FVCH_DATA_07','00',5497000);
--取数条件定义 领用单 (FVCH_WHERE_(单据代码07))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_07','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_07','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_07','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DUTY_USER','经手人','FVCH_WHERE_07','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_07','00',5497000);

--取数字段定义 损益单 (FVCH_DATA_(单据代码08))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_08','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('COST_APRICE','成本价','FVCH_DATA_08','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('COST_MONEY','成本金额','FVCH_DATA_08','00',5497000);
--取数条件定义 损益单 (FVCH_WHERE_(单据代码08))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_08','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_08','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_08','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DUTY_USER','经手人','FVCH_WHERE_08','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_08','00',5497000);

--取数字段定义 收款单 (FVCH_DATA_(单据代码09))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('RECV_MNY','收款金额','FVCH_DATA_09','00',5497000); 
--取数条件定义 收款单 (FVCH_WHERE_(单据代码09))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_09','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_09','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('ITEM_ID','收支科目','FVCH_WHERE_09','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('PAYM_ID','收款方式','FVCH_WHERE_09','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','客户名称','FVCH_WHERE_09','00',5497000);

--取数字段定义 付款单 (FVCH_DATA_(单据代码10))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('RECV_MNY','付款金额','FVCH_DATA_10','00',5497000); 
--取数条件定义 付款单 (FVCH_WHERE_(单据代码10))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_10','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_10','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('ITEM_ID','收支科目','FVCH_WHERE_10','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('PAYM_ID','付款方式','FVCH_WHERE_10','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','供应商','FVCH_WHERE_10','00',5497000);

--取数字段定义 零售单据 (FVCH_DATA_(单据代码11))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_AMOUNT','数量','FVCH_DATA_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('APRICE','单价','FVCH_DATA_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CALC_MONEY','含税金额','FVCH_DATA_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('NOTAX_MONEY','不含税金额','FVCH_DATA_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TAX_MONEY','销项税额','FVCH_DATA_11','00',5497000);

--取数条件定义 零售单据 (FVCH_WHERE_(单据代码11))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SORT_ID','商品指标','FVCH_WHERE_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','客户名称','FVCH_WHERE_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('GUIDE_USER','收银员','FVCH_WHERE_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('INVOICE_FLAG','票据类型','FVCH_WHERE_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IS_PRESENT','是否赠品','FVCH_WHERE_11','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SALES_STYLE','销售方式','FVCH_WHERE_11','00',5497000);

--取数字段定义 缴款单 (FVCH_DATA_(单据代码12))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('RECV_MNY','缴款金额','FVCH_DATA_12','00',5497000); 
--取数条件定义 缴款单 (FVCH_WHERE_(单据代码12))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_12','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_12','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('ITEM_ID','收支科目','FVCH_WHERE_12','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('PAYM_ID','缴款方式','FVCH_WHERE_12','00',5497000);
 
--取数字段定义 其他收入 (FVCH_DATA_(单据代码13))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IORO_MNY','金额','FVCH_DATA_13','00',5497000); 
--取数条件定义 其他收入 (FVCH_WHERE_(单据代码13))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_13','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_13','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','往来单位','FVCH_WHERE_13','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('ITEM_ID','收支科目','FVCH_WHERE_13','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IORO_USER','经手人','FVCH_WHERE_13','00',5497000);
 
--取数字段定义 其他支出 (FVCH_DATA_(单据代码14))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IORO_MNY','金额','FVCH_DATA_14','00',5497000); 
--取数条件定义 其他支出 (FVCH_WHERE_(单据代码14))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('DEPT_ID','部门','FVCH_WHERE_14','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_14','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('CLIENT_ID','往来单位','FVCH_WHERE_14','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('ITEM_ID','收支科目','FVCH_WHERE_14','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('IORO_USER','经手人','FVCH_WHERE_14','00',5497000);

--取数字段定义 存取款单 (FVCH_DATA_(单据代码15))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TRANS_MNY','金额','FVCH_DATA_15','00',5497000); 
--取数条件定义 其他支出 (FVCH_WHERE_(单据代码15))
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('SHOP_ID','门店','FVCH_WHERE_15','00',5497000);
insert into PUB_PARAMS(CODE_ID,CODE_NAME,TYPE_CODE,COMM,TIME_STAMP) values('TRANS_USER','经手人','FVCH_WHERE_15','00',5497000);

--凭证表的取数
CREATE TABLE [ACC_FVCHDATA_SQL] (
  --单据类型 01采购订单 02采购进货 03采购退货 04 销售订单 05 销售出货 06销售退货 07领用单 08 损益单 09收款单 10 付款单  11 零售单据 12缴款单 13 其他收入 14其他支出 15 存取款单
  FVCH_GTYPE [char](2) NOT NULL,
  --单据日期字段
  DATE_FIELD [varchar](60) NOT NULL,
  --取数SQL语句
  TAB_SQL1 [varchar](254) NOT NULL,
  TAB_SQL2 [varchar](254) NULL,  
  TAB_SQL3 [varchar](254) NULL,  
  TAB_SQL4 [varchar](254) NULL,  
  TAB_SQL5 [varchar](254) NULL,  
  TAB_SQL6 [varchar](254) NULL,  
  TAB_SQL7 [varchar](254) NULL,  
  TAB_SQL8 [varchar](254) NULL,  
  TAB_SQL9 [varchar](254) NULL,  
  TAB_SQL10 [varchar](254) NULL,  
  TAB_SQL11 [varchar](254) NULL, 
  TAB_SQL12 [varchar](254) NULL, 
  TAB_SQL13 [varchar](254) NULL, 
  TAB_SQL14 [varchar](254) NULL, 
  TAB_SQL15 [varchar](254) NULL, 
  TAB_SQL16 [varchar](254) NULL, 
  TAB_SQL17 [varchar](254) NULL, 
  TAB_SQL18 [varchar](254) NULL, 
 CONSTRAINT [PK_ACC_FVCHDATA_SQL] PRIMARY KEY 
  ( [FVCH_GTYPE])
); 

--单据类型(01) 采购订单
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2,TAB_SQL3,TAB_SQL4) values
  ('01','INDE_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.GUIDE_USER,B.INVOICE_FLAG,B.INDE_ID as ORDER_ID,A.GODS_ID,A.IS_PRESENT,A.CALC_AMOUNT,A.CALC_MONEY,',
   'round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2) as TAX_MONEY,',
   'A.CALC_MONEY-round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2)as NOTAX_MONEY,',
   'B.ADVA_MNY,B.BOND_MNY,(OTH1_MNY+OTH2_MNY+OTH3_MNY+OTH4_MNY+OTH5_MNY+OTH6_MNY)as OTHR_MNY from STK_INDENTDATA A,STK_INDENTORDER B where A.TENANT_ID=B.TENANT_ID and A.INDE_ID=B.INDE_ID'); 

--单据类型(02) 采购进货
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2,TAB_SQL3,TAB_SQL4) values
  ('02','STOCK_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.GUIDE_USER,B.INVOICE_FLAG,B.STOCK_ID as ORDER_ID,A.GODS_ID,A.IS_PRESENT,A.CALC_AMOUNT,A.CALC_MONEY,',
   'round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2) as TAX_MONEY,',
   'A.CALC_MONEY-round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2)as NOTAX_MONEY ',
   ' from STK_STOCKDATA A,STK_STOCKORDER B where A.TENANT_ID=B.TENANT_ID and A.STOCK_ID=B.STOCK_ID  and STOCK_TYPE=1'); 

--单据类型(03) 采购退货
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2,TAB_SQL3,TAB_SQL4) values
  ('03','STOCK_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.GUIDE_USER,B.INVOICE_FLAG,B.STOCK_ID as ORDER_ID,A.GODS_ID,A.IS_PRESENT,A.CALC_AMOUNT,A.CALC_MONEY,',
   'round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2) as TAX_MONEY,',
   'A.CALC_MONEY-round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2)as NOTAX_MONEY ',
   ' from STK_STOCKDATA A,STK_STOCKORDER B where A.TENANT_ID=B.TENANT_ID and A.STOCK_ID=B.STOCK_ID and STOCK_TYPE=3'); 

--单据类型(04) 销售订单     
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2,TAB_SQL3,TAB_SQL4) values
  ('04','INDE_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.GUIDE_USER,B.INVOICE_FLAG,B.INDE_ID as ORDER_ID,B.SALES_STYLE as SALES_STYLE,A.GODS_ID,A.IS_PRESENT,',
   'A.CALC_AMOUNT,A.CALC_MONEY,round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2) as TAX_MONEY,',
   'A.CALC_MONEY-round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2)as NOTAX_MONEY,B.ADVA_MNY,B.BOND_MNY,',
   '(OTH1_MNY+OTH2_MNY+OTH3_MNY+OTH4_MNY+OTH5_MNY+OTH6_MNY)as OTHR_MNY from SAL_INDENTDATA A,SAL_INDENTORDER B where A.TENANT_ID=B.TENANT_ID and A.INDE_ID=B.INDE_ID'); 
 
--单据类型(05) 销售出货
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2,TAB_SQL3,TAB_SQL4) values
  ('05','SALES_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.GUIDE_USER,B.INVOICE_FLAG,B.SALES_ID as ORDER_ID,B.SALES_STYLE as SALES_STYLE,A.GODS_ID,A.IS_PRESENT,',
   'A.CALC_AMOUNT,A.CALC_MONEY,round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2) as TAX_MONEY,',
   'A.CALC_MONEY-round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2)as NOTAX_MONEY ',
   ' from SAL_SALESDATA A,SAL_SALESORDER B where A.TENANT_ID=B.TENANT_ID and A.SALES_ID=B.SALES_ID and SALES_TYPE=1'); 

--单据类型(06) 销售退货
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2,TAB_SQL3,TAB_SQL4) values
  ('06','SALES_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.GUIDE_USER,B.INVOICE_FLAG,B.SALES_ID as ORDER_ID,B.SALES_STYLE as SALES_STYLE,A.GODS_ID,A.IS_PRESENT,',
   'A.CALC_AMOUNT,A.CALC_MONEY,round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2)as TAX_MONEY,',
   'A.CALC_MONEY-round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2)as NOTAX_MONEY ',
   ' from SAL_SALESDATA A,SAL_SALESORDER B where A.TENANT_ID=B.TENANT_ID and A.SALES_ID=B.SALES_ID and SALES_TYPE=3'); 
  
--单据类型(07) 领用单
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2) values
  ('07','CHANGE_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.DUTY_USER as GUIDE_USER,B.CHANGE_ID as ORDER_ID,A.GODS_ID,A.IS_PRESENT,A.CALC_AMOUNT,A.CALC_MONEY ',
   ' from STO_CHANGEDATA A,STO_CHANGEORDER B where A.TENANT_ID=B.TENANT_ID and A.CHANGE_ID=B.CHANGE_ID and CHANGE_CODE=''2'''); 
 
--单据类型(08) 损益单
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2) values
  ('08','CHANGE_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.DUTY_USER as GUIDE_USER,B.CHANGE_ID as ORDER_ID,A.GODS_ID,A.IS_PRESENT,A.CALC_AMOUNT,A.CALC_MONEY ', 
   ' from STO_CHANGEDATA A,STO_CHANGEORDER B where A.TENANT_ID=B.TENANT_ID and A.CHANGE_ID=B.CHANGE_ID and CHANGE_CODE=''1'''); 

--单据类型(09) 收款单
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2) values
  ('09','RECV_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.ITEM_ID,B.PAYM_ID,B.CLIENT_ID,B.RECV_ID as ORDER_ID,A.RECV_MNY from ACC_RECVDATA A,ACC_RECVORDER B ',
   ' where A.TENANT_ID=B.TENANT_ID and A.RECV_ID=B.RECV_ID'); 
  
--单据类型(10) 付款单
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2) values
  ('10','PAY_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.ITEM_ID,B.PAYM_ID,B.CLIENT_ID,B.PAY_ID as ORDER_ID,A.PAY_MNY from ACC_PAYDATA A,ACC_PAYORDER B ',
   ' where A.TENANT_ID=B.TENANT_ID and A.PAY_ID=B.PAY_ID'); 
 
--单据类型(11) 零售单
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1,TAB_SQL2,TAB_SQL3,TAB_SQL4) values
  ('11','SALES_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.GUIDE_USER,B.INVOICE_FLAG,B.SALES_ID as ORDER_ID,B.SALES_STYLE as SALES_STYLE,A.GODS_ID,A.IS_PRESENT,A.CALC_AMOUNT,A.CALC_MONEY,',
   'PAY_A,PAY_B,PAY_C,PAY_D,PAY_E,PAY_F,PAY_G,PAY_H,PAY_I,PAY_J,round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2) as TAX_MONEY,',
   'A.CALC_MONEY-round(A.CALC_MONEY/(1+case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end)*case when B.INVOICE_FLAG=''3'' then B.TAX_RATE else 0 end,2)as NOTAX_MONEY ',
   ' from SAL_SALESDATA A,SAL_SALESORDER B where A.TENANT_ID=B.TENANT_ID and A.SALES_ID=B.SALES_ID and SALES_TYPE=4'); 
  
--单据类型(12) 缴款单  
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1) values
  ('12','RECV_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.ITEM_ID,B.PAYM_ID,B.CLIENT_ID,B.RECV_ID as ORDER_ID,A.RECV_MNY from ACC_RECVDATA A,ACC_RECVORDER B where A.TENANT_ID=B.TENANT_ID and A.RECV_ID=B.RECV_ID'); 

--单据类型(13) 其他收入      
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1) values
  ('13','IORO_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.ITEM_ID,B.IORO_USER as GUIDE_USER,B.IORO_ID as ORDER_ID,A.IORO_MNY from ACC_IORODATA A,ACC_IOROORDER B where A.TENANT_ID=B.TENANT_ID and A.IORO_ID=B.IORO_ID and B.IORO_TYPE=''1'''); 

--单据类型(14) 其他支出      
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1) values
  ('14','IORO_DATE',
   'select B.TENANT_ID,B.DEPT_ID,B.SHOP_ID,B.CLIENT_ID,B.ITEM_ID,B.IORO_USER as GUIDE_USER,B.IORO_ID as ORDER_ID,A.IORO_MNY from ACC_IORODATA A,ACC_IOROORDER B where A.TENANT_ID=B.TENANT_ID and A.IORO_ID=B.IORO_ID and B.IORO_TYPE=''2'''); 
 
--单据类型(15) 存取款单 
insert into ACC_FVCHDATA_SQL(FVCH_GTYPE,DATE_FIELD,TAB_SQL1) values 
  ('15','TRANS_DATE','select TENANT_ID,SHOP_ID,TRANS_ID as ORDER_ID,TRANS_MNY from ACC_TRANSORDER A where 1=1 '); 
 
 


